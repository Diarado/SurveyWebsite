<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Scoring Website</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div id="top">
    <div id="displayInput"></div>

    <!-- <div id="instruction">
  
  <p class = "inst_h1"> Open the link below as a new tab. Answer questions and submit the survey. Then submit it </p>
  <a href="https://cornell.ca1.qualtrics.com/jfe/form/SV_8q87dpeZzOYdDi6">https://cornell.ca1.qualtrics.com/jfe/form/SV_8q87dpeZzOYdDi6</a>
  <p class = "inst_h1"> Evaluate images that you see.  If you click 'next' you will see a new images.</p>
</div> -->

    <div id="imageContainer">
      <!-- Image will be inserted here by JavaScript -->
    </div>
  </div>


  <div id="sliders">
    <div id="vividnessSliderDiv">
      <label class="label" for="vividnessSlider">Vividness</label>
      <div class="definitionBox">
        <span class="definition"> Degree of visualization and elaboration of mental images generated</span> <button
          id="VividnessButton">Show Vividness criteria</button>
      </div>
      <input type="range" id="vividnessSlider" name="vividness" min="1" max="5" value="3">
      <ul class="likert-markers">
        <li>0</li>
        <li>0.5</li>
        <li>1</li>
        <li>1.5</li>
        <li>2</li>
      </ul>

    </div>

    <div id="originalSliderDiv">
      <label class="label" for="originalSlider">Originality</label>
      <p>Novelty of the mental images generated</p>
      <input type="range" id="originalSlider" name="original" min="1" max="5" value="3">
      <button id="OriginalButton">Show Original criteria</button>
    </div>

    <div id="transformSliderDiv">
      <label class="label" for="transformSlider">Transformation</label>
      <input type="range" id="transformSlider" name="transform" min="1" max="5" value="3">
      <button id="TransformButton">Show Transform criteria</button>
    </div>

  </div>

  <div id="pdfContainer" style="position: absolute; right: 30px; top: 30px;"></div>


  <button id="nextImage">Next Image</button>

  <script src="script.js"></script>


  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAXNN7TE_8-HIdR75kqQ47imZhrg3Qtfks",
      authDomain: "imageeval-dd6e8.firebaseapp.com",
      databaseURL: "https://imageeval-dd6e8-default-rtdb.firebaseio.com",
      projectId: "imageeval-dd6e8",
      storageBucket: "imageeval-dd6e8.appspot.com",
      messagingSenderId: "238433835181",
      appId: "1:238433835181:web:ca3ce01a2ad81408894e24",
      measurementId: "G-5B424981D1"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);







    // Assuming you have an element with ID 'vividnessSlider' in your HTML
    document.addEventListener('DOMContentLoaded', function () {
      var userInput = prompt("Please enter your Prolific ID:", "Your ID");
      if (userInput != null && userInput !== "") {
        document.getElementById("displayInput").innerHTML = "Hello " + userInput + "! Welcome to our study!";
      }

      set(ref(database, 'test/' + 'example'), { hello: 'world' })
        .then(() => console.log("Simple data saved successfully."))
        .catch((error) => console.log("Failed to save simple data.", error));

      var saveUserDataButton = document.getElementById('nextImage');
      saveUserDataButton.addEventListener('click', function () {
        var vividness_value = document.getElementById('vividnessSlider').value;
        var original_value = document.getElementById('originalSlider').value;
        var transform_value = document.getElementById('transformSlider').value;

        console.log(vividness_value, original_value, transform_value);

        var userData = {
          username: userInput,
          email: "newuser@example.com",
          profile_picture: "newUserProfilePic.jpg",
          scores: {
            vividness: vividness_value,
            original: original_value,
            transform: transform_value
          }
        };

        console.log(userData);

        var userId = push(ref(database, 'users')).key;

        console.log(userId);

        set(ref(database, 'users/' + userId), userData)
          .then(() => {
            console.log("Data saved successfully.");
          })
          .catch((error) => {
            console.log("Data could not be saved." + error);
          });
      });
    });

  </script>


</body>

</html>